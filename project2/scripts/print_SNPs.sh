#!/bin/sh 

FLANK=10
let REGION="2*${FLANK}+1"

function extract () {
    AWK="{print \"${COL_GENE} COL ${SNP_ID} ${COL_SNP} \" substr(\$1,${COL_SNP},1), substr(\$1, ${COL_SNP}-${FLANK}, ${REGION});}"
    grep -A 1 ${COL_GENE} ${COL_FASTA} | tail -1 | awk "${AWK}"
    AWK="{print \"${LER_GENE} LER ${SNP_ID} ${LER_SNP} \" substr(\$1,${LER_SNP},1), substr(\$1, ${LER_SNP}-${FLANK}, ${REGION});}"
    grep -A 1 ${LER_GENE} ${LER_FASTA} | tail -1 | awk "${AWK}"
}

COL_GENE=AT2G35670
LER_GENE=AT2G35670

COL_FASTA=AT2G35670.1_Col-0.cdna_tair_7.fasta
LER_FASTA=AT2G35670.1_Ler-1.cdna_tair_7.fasta

SNP_ID=AT2G35670.GABI1
COL_SNP=1331
LER_SNP=1331 
#extract
SNP_ID=AT2G35670.GABI2
COL_SNP=1846
LER_SNP=1846
#extract
SNP_ID=AT2G35670.GABI3
COL_SNP=2007
LER_SNP=2007
#extract

COL_GENE=AT2G35670
LER_GENE=AT2G35670

COL_FASTA=Col.pilon4.oneline
LER_FASTA=Ler.pilon4.oneline

SNP_ID=AT2G35670.SNP1
COL_SNP=1331
LER_SNP=1328
extract 
SNP_ID=AT2G35670.SNP2  # THIS IS IN A LER REPEAT?
COL_SNP=1846
LER_SNP=2023
extract 
SNP_ID=AT2G35670.SNP3
COL_SNP=2007
LER_SNP=2184
extract 
SNP_ID=AT2G35670.SNP4
COL_SNP=2545
LER_SNP=2722
extract 

COL_GENE=AT5G60440
LER_GENE=AT5G60440

COL_FASTA=Col.pilon4.oneline
LER_FASTA=Ler.pilon4.oneline

SNP_ID=AT5G60440.SNP4
COL_SNP=579
LER_SNP=579
extract
SNP_ID=AT5G60440.SNP5
COL_SNP=698
LER_SNP=698
extract
SNP_ID=AT5G60440.SNP6
COL_SNP=721
LER_SNP=721
extract

COL_GENE=AT4G25530
LER_GENE=AT4G25530

COL_FASTA=Col.pilon4.oneline
LER_FASTA=Ler.pilon4.oneline

SNP_ID=AT4G25530.SNP1
COL_SNP=136
LER_SNP=136
extract
SNP_ID=AT4G25530.SNP2
COL_SNP=148
LER_SNP=148
extract
SNP_ID=AT4G25530.SNP3
COL_SNP=693
LER_SNP=693
extract
SNP_ID=AT4G25530.SNP4
COL_SNP=1117
LER_SNP=1117
extract
